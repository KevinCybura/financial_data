name: Setup
description: Installs poetry, builds deps and caches virtual env.
#inputs:
#  file-path:  # id of input
#    description: "Path to test script"
#    required: true
#    default: 'test-file.js'
#outputs:
#  results-file: # id of output
#    description: "Path to results file"

runs:
  using: composite
  steps:
    - name: Checkout branch
      uses: actions/checkout@v2

    - name: Setup Python 3.9
      uses: actions/setup-python@v2
      with:
        python-version: 3.9

    - name: Install Poetry
      uses: abatilo/actions-poetry@v2.0.0
      with:
        poetry-version: 1.1.4

    - name: Cache poetry install
      uses: actions/cache@v2.1.3
      with:
        path: ~/.cache/pypoetry/virtualenvs
        key: poetry-${{ hashFiles('poetry.lock') }}
        restore-keys: |
          poetry-
